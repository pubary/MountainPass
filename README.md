# Проект Pereval API

*Проект предназначен для взаимодействия с мобильным приложением Pereval для Android и IOS.*

*Пользоваться мобильным приложением будут туристы для отправки данных о горном перевале - в горах они будут вносить данные в приложение и отправлять их на сервер, как только появится доступ в Интернет.*

*Модератор должен будет верифицировать и вносить в базу данных информацию, полученную от пользователей, а те в свою очередь смогут увидеть в мобильном приложении статус модерации и просматривать базу с объектами, внесёнными другими.*

***Допустимые значения поля модерации <status>:***
+ *'new';*
+ *'pending' - взято на модерацию;*
+ *'accepted' - модерация прошла успешно;*
+ *'rejected' - модерация прошла, информация не принята.*
______

***Пользователь с помощью мобильного приложения будет передавать следующие данные о горном перевале:***
+ *название объекта;*
+ *координаты объекта и его высоту;*
+ *несколько фотографий;*
+ *информацию о пользователе, который передал данные о перевале:*
  + *имя пользователя (ФИО строкой);*
  + *почта;*
  + *телефон.*

***Мобильное приложение пользователя вызывает следующие методы Pereval API:***

 ***Метод GET*** 
```python
/api/v1/submitdata/?user__email=<email>
```
*Цель - получение списка данных обо всех объектах, которые пользователь с почтой <email> отправил на сервер.*

*Результат - вывод JSON с указанным списком*

 ***Метод GET*** 
```python
/api/v1/submitdata/<id>
```
*Цель - получение одой внесённой записи о перевале по её <id>.*

*Результат - вывод JSON с всей информацией об объекте, в том числе статус модерации.*

 ***Метод POST*** 
```python
/api/v1/submitdata/
 ```
*Цель - отправка данных на сервер о новом объекте (перевале).*

*Результат - вывод  JSON с данными:*
+ *status - код HTTP, целое число:*
    *500 - ошибка при выполнении операции;*
    *400 - Bad Request (при нехватке полей);*
    *200 - успех.*
+ *message - строка:*
   *Причина ошибки (если она была);*
   *Отправлено успешно;*
+ *id:*
   *Идентификатор, который был присвоен объекту при добавлении в базу данных.*
   *Null, если отправка не была успешна*

*Предоставляемые данные:*
+ *JSON в теле запроса с информацией о перевале в виде:*
```json
{
  "beauty_title": "пер.",
  "title": "Пхия",
  "other_titles": "Триев",
  "connect": "",
  "add_time": "2021-09-22 13:18:13",
  "user": {
    "email": "qwerty@mail.ru", 		
    "fam": "Пупкин",
	"name": "Василий",
	"otc": "Иванович",
    "phone": "+7 555 55 55"
  },
  "coords":{
    "latitude": "45.3842",
    "longitude": "7.1525",
    "height": "1200"
  },
  "level":{
    "winter": "",
    "summer": "1А",
    "autumn": "1А",
    "spring": ""
  },
  "images": [
    {"data":"<картинка1>", "title":"Седловина"},
    {"data":"<картинка>", "title":"Подъём"}
  ]
}
```
 ***Метод PATCH*** 
```python
/api/v1/submitdata/<id>
```
*Цель - отредактировать существующую запись (замена), если она в статусе <new>. Редактировать можно все поля, кроме тех, что содержат в себе ФИО, адрес почты и номер телефона.*

*Результат - вывод  JSON с данными:*
+ *state: - целое число:*
    *1 - если успешно удалось отредактировать запись в базе данных;*
    *0 - в противном случае;*
+ *message - строка:*
   *Сообщение о успехе, в случае положительного результата редактирования;*
   *Информация об ошибке, в случае её возникновения.*

*Предоставляемые данные - метод принимает тот же самый JSON, который принимает метод GET submitdata.*

***Дополнительно с работой API можно ознакомиться, используя метод GET:***
```python
/api/v1/swagger/schema/
```

***Зависимости проекта:***
```python
pip install requirements.txt
```